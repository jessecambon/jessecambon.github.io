<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Quasiquotation Demystified | jessecambon</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Quasiquotation Demystified" />
<meta name="author" content="Jesse Cambon" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Quasiquotation is a somewhat intimidating term for useful concept that will allow you to write more elegant and customizable dplyr-based code and functions. The purpose of this post is to demystify quasiquotation and show you how you can put it to use in your code." />
<meta property="og:description" content="Quasiquotation is a somewhat intimidating term for useful concept that will allow you to write more elegant and customizable dplyr-based code and functions. The purpose of this post is to demystify quasiquotation and show you how you can put it to use in your code." />
<link rel="canonical" href="http://localhost:4000/2019/11/18/quasiquotation-demo.html" />
<meta property="og:url" content="http://localhost:4000/2019/11/18/quasiquotation-demo.html" />
<meta property="og:site_name" content="jessecambon" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-11-18T00:00:00-05:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","headline":"Quasiquotation Demystified","url":"http://localhost:4000/2019/11/18/quasiquotation-demo.html","datePublished":"2019-11-18T00:00:00-05:00","dateModified":"2019-11-18T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/11/18/quasiquotation-demo.html"},"author":{"@type":"Person","name":"Jesse Cambon"},"description":"Quasiquotation is a somewhat intimidating term for useful concept that will allow you to write more elegant and customizable dplyr-based code and functions. The purpose of this post is to demystify quasiquotation and show you how you can put it to use in your code.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="jessecambon" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">jessecambon</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Quasiquotation Demystified</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-11-18T00:00:00-05:00" itemprop="datePublished">Nov 18, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p><a href="https://rlang.r-lib.org/reference/quasiquotation.html">Quasiquotation</a>
is a somewhat intimidating term for useful concept that will allow you
to write more elegant and customizable dplyr-based code and functions.
The purpose of this post is to demystify quasiquotation and show you how
you can put it to use in your code.</p>

<p>To begin, let’s consider a simple example in dplyr with the mtcars
dataset. Here we calculate the maximum and minimum horsepower (hp) by
the number of cylinders (cyl) using the “group_by” and “summarize”
functions.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">hp_by_cyl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">max_hp</span><span class="o">=</span><span class="nf">max</span><span class="p">(</span><span class="n">hp</span><span class="p">),</span><span class="w">
            </span><span class="n">min_hp</span><span class="o">=</span><span class="nf">min</span><span class="p">(</span><span class="n">hp</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">cyl</th>
      <th style="text-align: right">max_hp</th>
      <th style="text-align: right">min_hp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">113</td>
      <td style="text-align: right">52</td>
    </tr>
    <tr>
      <td style="text-align: right">6</td>
      <td style="text-align: right">175</td>
      <td style="text-align: right">105</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">335</td>
      <td style="text-align: right">150</td>
    </tr>
  </tbody>
</table>

<p>This code works well enough, but let’s say we wanted to change the group
by variable so that we could, for example, calculate maximum and minimum
hp by the <code class="highlighter-rouge">vs</code> (engine type) or <code class="highlighter-rouge">am</code> (transmission) variables. One way
to accomplish this would be to copy and paste the above code and then
manually change the group by variable. However, this isn’t a particular
elegant or efficient solution particularly with more complicated code or
in situations where we’d like to iterate through several different
variables.</p>

<p>Another approach might be to store that name of a new group by variable
in a variable like this <code class="highlighter-rouge">groupby_var &lt;- "vs"</code> and then use <code class="highlighter-rouge">groupby_var</code>
in our code (ie. <code class="highlighter-rouge">group_by(groupby_var)</code>. However, if you were to try
this you would find it doesn’t work because of the way dplyr works. The
group_by function expects the variable (or variables) you want to
aggregate by as inputs. It does not expect the variable names to be in
quotes and it doesn’t expect you to give it a variable that contains the
name of the variable you want to aggregate by.</p>

<p>Essentially, we need a way to tell the group_by function to look at the
value stored in <code class="highlighter-rouge">groupby_var</code> and use that value as a variable name.
This is the type of operation that quasiquotation is built for. In the
example below we use the
<a href="https://rlang.r-lib.org/reference/quotation.html">quo</a> function and the
<code class="highlighter-rouge">!!</code> operator from rlang to accomplish this objective.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">groupby_var</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">quo</span><span class="p">(</span><span class="n">vs</span><span class="p">)</span><span class="w">

</span><span class="n">hp_by_vs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">group_by</span><span class="p">(</span><span class="o">!!</span><span class="n">groupby_var</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">max_hp</span><span class="o">=</span><span class="nf">max</span><span class="p">(</span><span class="n">hp</span><span class="p">),</span><span class="w">
            </span><span class="n">min_hp</span><span class="o">=</span><span class="nf">min</span><span class="p">(</span><span class="n">hp</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">vs</th>
      <th style="text-align: right">max_hp</th>
      <th style="text-align: right">min_hp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">335</td>
      <td style="text-align: right">91</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">123</td>
      <td style="text-align: right">52</td>
    </tr>
  </tbody>
</table>

<p>Using this code, we can now modify our groupby_var as needed to
aggregate by whatever variables we like without copy and pasting code.
If we writing this code for experimental purposes then this might be
good enough. However, if we wanted to call this code multiple times in
the same script then we should turn it into a function. To do this, the
main modification we have to make is to use the enquo function instead
of the quo function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">max_min_hp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">groupby_var</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">groupby_var</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">enquo</span><span class="p">(</span><span class="n">groupby_var</span><span class="p">)</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
    </span><span class="n">group_by</span><span class="p">(</span><span class="o">!!</span><span class="n">groupby_var</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
    </span><span class="n">summarize</span><span class="p">(</span><span class="n">max_hp</span><span class="o">=</span><span class="nf">max</span><span class="p">(</span><span class="n">hp</span><span class="p">),</span><span class="w">
              </span><span class="n">min_hp</span><span class="o">=</span><span class="nf">min</span><span class="p">(</span><span class="n">hp</span><span class="p">)))</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="n">hp_by_am</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">max_min_hp</span><span class="p">(</span><span class="n">am</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">am</th>
      <th style="text-align: right">max_hp</th>
      <th style="text-align: right">min_hp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">245</td>
      <td style="text-align: right">62</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">335</td>
      <td style="text-align: right">52</td>
    </tr>
  </tbody>
</table>

<p>Now let’s say we wanted to customize this function even further. Let’s
make it so that our function can use one or multiple variables for
group_by and let’s make the measurement variable (hp in the above
examples) an input to the function.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get_stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">groupby_vars</span><span class="p">,</span><span class="n">measure_var</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">groupby_vars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rlang</span><span class="o">::</span><span class="n">syms</span><span class="p">(</span><span class="n">groupby_vars</span><span class="p">)</span><span class="w">
  </span><span class="n">measure_name</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">quo_name</span><span class="p">(</span><span class="n">enquo</span><span class="p">(</span><span class="n">measure_var</span><span class="p">))</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="w"> 
    </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="o">!!!</span><span class="n">groupby_vars</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
            </span><span class="n">summarize</span><span class="p">(</span><span class="w"> </span><span class="o">!!</span><span class="n">str_c</span><span class="p">(</span><span class="n">measure_name</span><span class="p">,</span><span class="s2">"_max"</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">max</span><span class="p">(),</span><span class="w">
                       </span><span class="o">!!</span><span class="n">str_c</span><span class="p">(</span><span class="n">measure_name</span><span class="p">,</span><span class="s2">"_min"</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">min</span><span class="p">())</span><span class="w"> 
    </span><span class="p">)}</span><span class="w">
</span><span class="n">cyl_hp_stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">get_stats</span><span class="p">(</span><span class="s2">"cyl"</span><span class="p">,</span><span class="n">mpg</span><span class="p">)</span><span class="w">
</span><span class="n">gear_stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">get_stats</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"am"</span><span class="p">,</span><span class="s2">"vs"</span><span class="p">),</span><span class="n">gear</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">cyl</th>
      <th style="text-align: right">mpg_max</th>
      <th style="text-align: right">mpg_min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">33.9</td>
      <td style="text-align: right">21.4</td>
    </tr>
    <tr>
      <td style="text-align: right">6</td>
      <td style="text-align: right">21.4</td>
      <td style="text-align: right">17.8</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">19.2</td>
      <td style="text-align: right">10.4</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: right">am</th>
      <th style="text-align: right">vs</th>
      <th style="text-align: right">gear_max</th>
      <th style="text-align: right">gear_min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">4</td>
    </tr>
  </tbody>
</table>

<p>Creating a function with a list argument. Return mean horsepower with a
list of group by variables.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">metric_calc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">group_vars</span><span class="p">,</span><span class="n">measure_var</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">group_vars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rlang</span><span class="o">::</span><span class="n">syms</span><span class="p">(</span><span class="n">group_vars</span><span class="p">)</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="o">!!!</span><span class="n">group_vars</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
           </span><span class="n">summarize</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">(),</span><span class="w">
                     </span><span class="n">variable</span><span class="o">=</span><span class="n">quo_name</span><span class="p">(</span><span class="n">enquo</span><span class="p">(</span><span class="n">measure_var</span><span class="p">)),</span><span class="w">
                     </span><span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">(),</span><span class="w">
                     </span><span class="n">min</span><span class="o">=</span><span class="nf">min</span><span class="p">(),</span><span class="w">
                     </span><span class="n">max</span><span class="o">=</span><span class="nf">max</span><span class="p">())</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
 
</span><span class="n">gear_hp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">metric_calc</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s1">'gear'</span><span class="p">),</span><span class="n">hp</span><span class="p">)</span><span class="w"> 
</span><span class="n">vs_am_hp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">metric_calc</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s1">'vs'</span><span class="p">,</span><span class="s1">'am'</span><span class="p">),</span><span class="n">cyl</span><span class="p">)</span><span class="w"> 
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kable</span><span class="p">(</span><span class="n">gear_hp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">gear</th>
      <th style="text-align: right">n</th>
      <th style="text-align: left">variable</th>
      <th style="text-align: right">mean</th>
      <th style="text-align: right">min</th>
      <th style="text-align: right">max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">3</td>
      <td style="text-align: right">15</td>
      <td style="text-align: left">hp</td>
      <td style="text-align: right">176.1333</td>
      <td style="text-align: right">97</td>
      <td style="text-align: right">245</td>
    </tr>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">12</td>
      <td style="text-align: left">hp</td>
      <td style="text-align: right">89.5000</td>
      <td style="text-align: right">52</td>
      <td style="text-align: right">123</td>
    </tr>
    <tr>
      <td style="text-align: right">5</td>
      <td style="text-align: right">5</td>
      <td style="text-align: left">hp</td>
      <td style="text-align: right">195.6000</td>
      <td style="text-align: right">91</td>
      <td style="text-align: right">335</td>
    </tr>
  </tbody>
</table>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">kable</span><span class="p">(</span><span class="n">vs_am_hp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">vs</th>
      <th style="text-align: right">am</th>
      <th style="text-align: right">n</th>
      <th style="text-align: left">variable</th>
      <th style="text-align: right">mean</th>
      <th style="text-align: right">min</th>
      <th style="text-align: right">max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">12</td>
      <td style="text-align: left">cyl</td>
      <td style="text-align: right">8.000000</td>
      <td style="text-align: right">8</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td style="text-align: right">0</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">6</td>
      <td style="text-align: left">cyl</td>
      <td style="text-align: right">6.333333</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">8</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">7</td>
      <td style="text-align: left">cyl</td>
      <td style="text-align: right">5.142857</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">6</td>
    </tr>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">7</td>
      <td style="text-align: left">cyl</td>
      <td style="text-align: right">4.000000</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">4</td>
    </tr>
  </tbody>
</table>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">gear_hp</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">gear</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">mean</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">theme_classic</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ylab</span><span class="p">(</span><span class="s1">'Mean HP'</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/rmd_images/2019-11-20-quasiquotation-demo/unnamed-chunk-11-1.png" alt="" /><!-- --></p>

<p>Experimental:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get_stats</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">groupby_vars</span><span class="p">,</span><span class="n">measure_var</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  
  </span><span class="n">measure_name</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">quo_name</span><span class="p">(</span><span class="n">enquo</span><span class="p">(</span><span class="n">measure_var</span><span class="p">))</span><span class="w">
  </span><span class="nf">return</span><span class="p">(</span><span class="w"> 
    </span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">group_by_at</span><span class="p">(</span><span class="n">groupby_vars</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
            </span><span class="n">summarize</span><span class="p">(</span><span class="w"> </span><span class="o">!!</span><span class="n">str_c</span><span class="p">(</span><span class="n">measure_name</span><span class="p">,</span><span class="s2">"_max"</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">max</span><span class="p">(),</span><span class="w">
                       </span><span class="o">!!</span><span class="n">str_c</span><span class="p">(</span><span class="n">measure_name</span><span class="p">,</span><span class="s2">"_min"</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nf">min</span><span class="p">())</span><span class="w"> 
    </span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1">#test1 &lt;- mtcars %&gt;% get_stats(cyl,mpg)</span><span class="w">
</span><span class="n">test2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">get_stats</span><span class="p">(</span><span class="n">vars</span><span class="p">(</span><span class="n">cyl</span><span class="p">,</span><span class="n">am</span><span class="p">),</span><span class="n">gear</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">cyl</th>
      <th style="text-align: right">am</th>
      <th style="text-align: right">gear_max</th>
      <th style="text-align: right">gear_min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">6</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">6</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">0</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">5</td>
    </tr>
  </tbody>
</table>

  </div><a class="u-url" href="/2019/11/18/quasiquotation-demo.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/jessecambon"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jessecambon</span></a></li><li><a href="https://www.linkedin.com/in/jessecambon"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">jessecambon</span></a></li></ul>
</div>
  </div>
</footer></body>

</html>
